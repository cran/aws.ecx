<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Quick-Start-Guide</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Quick-Start-Guide</h1>



<p><a href="https://cran.r-project.org/package=aws.ecx"><embed src="data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NSIgaGVpZ2h0PSIyMCIgYXJpYS1sYWJlbD0iQ1JBTiAxLjAuNCI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJiIiB4Mj0iMCIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iLjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxtYXNrIGlkPSJhIj4KICAgIDxyZWN0IHdpZHRoPSI4NSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz4KICA8L21hc2s+CiAgPGcgbWFzaz0idXJsKCNhKSI+CiAgICA8cGF0aCBmaWxsPSIjNTU1IiBkPSJNMCAwaDQzdjIwSDB6Ii8+CiAgICA8cGF0aCBmaWxsPSIjOTdDQTAwIiBkPSJNNDMgMGg2M3YyMEg0M3oiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoODV2MjBIMHoiLz4KICA8L2c+CiAgPGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIKICAgICBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSI+CiAgICA8dGV4dCB4PSIyMS41IiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+CiAgICAgIENSQU4KICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9IjIxLjUiIHk9IjE0Ij4KICAgICAgQ1JBTgogICAgPC90ZXh0PgogICAgPHRleHQgeD0iNjMiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj4KICAgICAgMS4wLjQKICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9IjYzIiB5PSIxNCI+CiAgICAgIDEuMC40CiAgICA8L3RleHQ+CiAgPC9nPgo8L3N2Zz4="></embed></a> <a href="https://github.com/Jiefei-Wang/aws.ecx"><img src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTIyIiBoZWlnaHQ9IjIwIiByb2xlPSJpbWciIGFyaWEtbGFiZWw9ImRldmVsIHZlcnNpb246IDEuMC40Ij48dGl0bGU+ZGV2ZWwgdmVyc2lvbjogMS4wLjQ8L3RpdGxlPjxsaW5lYXJHcmFkaWVudCBpZD0icyIgeDI9IjAiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNiYmIiIHN0b3Atb3BhY2l0eT0iLjEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iLjEiLz48L2xpbmVhckdyYWRpZW50PjxjbGlwUGF0aCBpZD0iciI+PHJlY3Qgd2lkdGg9IjEyMiIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz48L2NsaXBQYXRoPjxnIGNsaXAtcGF0aD0idXJsKCNyKSI+PHJlY3Qgd2lkdGg9IjgzIiBoZWlnaHQ9IjIwIiBmaWxsPSIjNTU1Ii8+PHJlY3QgeD0iODMiIHdpZHRoPSIzOSIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZlN2QzNyIvPjxyZWN0IHdpZHRoPSIxMjIiIGhlaWdodD0iMjAiIGZpbGw9InVybCgjcykiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlZlcmRhbmEsR2VuZXZhLERlamFWdSBTYW5zLHNhbnMtc2VyaWYiIHRleHQtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIGZvbnQtc2l6ZT0iMTEwIj48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iNDI1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSI3MzAiPmRldmVsIHZlcnNpb248L3RleHQ+PHRleHQgeD0iNDI1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiBmaWxsPSIjZmZmIiB0ZXh0TGVuZ3RoPSI3MzAiPmRldmVsIHZlcnNpb248L3RleHQ+PHRleHQgYXJpYS1oaWRkZW49InRydWUiIHg9IjEwMTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjI5MCI+MS4wLjQ8L3RleHQ+PHRleHQgeD0iMTAxNSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgZmlsbD0iI2ZmZiIgdGV4dExlbmd0aD0iMjkwIj4xLjAuNDwvdGV4dD48L2c+PC9zdmc+" /></a> <a href="https://cran.r-project.org/package=aws.ecx"><embed src="data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iMjAiIGFyaWEtbGFiZWw9IkNSQU4gZG93bmxvYWRzIDY0MC9tb250aCI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJiIiB4Mj0iMCIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iLjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxtYXNrIGlkPSJhIj4KICAgIDxyZWN0IHdpZHRoPSIxNDkiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+CiAgPC9tYXNrPgogIDxnIG1hc2s9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNzB2MjBIMHoiLz4KICAgIDxwYXRoIGZpbGw9IiMwMDdlYzYiIGQ9Ik03MCAwaDc5djIwSDcweiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNiKSIgZD0iTTAgMGgxNDl2MjBIMHoiLz4KICA8L2c+CiAgPGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIKICAgICBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSI+CiAgICA8dGV4dCB4PSIzNiIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPgogICAgICBkb3dubG9hZHMKICAgIDwvdGV4dD4KICAgIDx0ZXh0IHg9IjM2IiB5PSIxNCI+CiAgICAgIGRvd25sb2FkcwogICAgPC90ZXh0PgogICAgPHRleHQgeD0iMTA4LjUiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj4KICAgICAgNjQwL21vbnRoCiAgICA8L3RleHQ+CiAgICA8dGV4dCB4PSIxMDguNSIgeT0iMTQiPgogICAgICA2NDAvbW9udGgKICAgIDwvdGV4dD4KICA8L2c+Cjwvc3ZnPg=="></embed></a></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This package aims to provide the functions for communicating with Amazon Web Services(AWS) Elastic Container Service(ECS) using AWS REST APIs. The ECS functions start with the prefix <code>ecs_</code> and EC2 functions start with <code>ec2_</code>. The general-purpose functions have the prefix <code>aws_</code>.</p>
<p>Since there are above 400 EC2 APIs, it is not possible for the unit test to cover all use cases. If you see any problems when using the package, please consider to submit the issue to <a href="https://github.com/Jiefei-Wang/aws.ecx/issues">GitHub issue</a>.</p>
</div>
<div id="authentication" class="section level1">
<h1>Authentication</h1>
<p>Credentials must be provided for using the package. The package uses <code>access key id</code> and <code>secret access key</code> to authenticate with AWS. See <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html">AWS user guide</a> for the information about how to obtain them from AWS console. The credentials can be set via <code>aws_set_credentials()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">aws_set_credentials</span>()</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#&gt; $access_key_id</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; [1] &quot;AK**************OYX3&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; $secret_access_key</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; [1] &quot;mL**********************************XGGH&quot;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; $region</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; [1] &quot;ap-southeast-1&quot;</span></a></code></pre></div>
<p>The function <code>aws_set_credentials</code> sets both the credentials and the region of the AWS service. You can either explicitly provide them by the function arguments or rely on the locator to automatically find your credentials. There are many ways to locate the credentials but the most important methods are as follow(sorted by the search order):</p>
<ol style="list-style-type: decimal">
<li><p>environment variables <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, <code>AWS_DEFAULT_REGION</code>, and <code>AWS_SESSION_TOKEN</code></p></li>
<li><p>a profile in a global credentials dot file in a location set by <code>AWS_SHARED_CREDENTIALS_FILE</code> or defaulting typically to <code>&quot;~/.aws/credentials&quot;</code> (or another OS-specific location), using the profile specified by <code>AWS_PROFILE</code></p></li>
</ol>
<p>Users can find the details on how the credentials are located from <code>?aws.signature::locate_credentials</code>. A list of AWS regions can be found by calling the function <code>aws_list_regions</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">aws_list_regions</span>()</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt;  [1] &quot;us-east-1&quot;      &quot;us-east-2&quot;      &quot;us-west-1&quot;      &quot;us-west-2&quot;      &quot;us-gov-west-1&quot; </span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt;  [6] &quot;us-gov-east-1&quot;  &quot;ca-central-1&quot;   &quot;eu-north-1&quot;     &quot;eu-west-1&quot;      &quot;eu-west-2&quot;     </span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; [11] &quot;eu-west-3&quot;      &quot;eu-central-1&quot;   &quot;eu-south-1&quot;     &quot;af-south-1&quot;     &quot;ap-northeast-1&quot;</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; [16] &quot;ap-northeast-2&quot; &quot;ap-northeast-3&quot; &quot;ap-southeast-1&quot; &quot;ap-southeast-2&quot; &quot;ap-east-1&quot;     </span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; [21] &quot;ap-south-1&quot;     &quot;sa-east-1&quot;      &quot;me-south-1&quot;</span></a></code></pre></div>
</div>
<div id="call-the-functions" class="section level1">
<h1>Call the functions</h1>
<p>Calling the EC2 or ECS function is simple, for example, you can list all ECS clusters via</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">ecs_list_clusters</span>()</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; REST request failed with the message:</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt;  Timeout was reached: [ecs.ap-southeast-1.amazonaws.com] Send failure: Connection was aborted</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; [1] &quot;arn:aws:ecs:ap-southeast-1:020007817719:cluster/R-worker-cluster&quot;</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; [2] &quot;arn:aws:ecs:ap-southeast-1:020007817719:cluster/test&quot;</span></a></code></pre></div>
<p>The original EC2 and ECS APIs accept the request parameter via the query parameter or header and return the result by JSON or XML text in the REST request. The package provides a unified way to call both APIs. The request parameters can be given by the function arguments and the result is returned in a list format. If possible, the package will try to simplify the result and return a simple character vector. It will also handle the <code>nextToken</code> parameter in the REST APIs and collect the full result in a single function call. This default behavior can be turned off by providing the parameter <code>simplefy = FALSE</code>.</p>
<p>Each EC2 or ECS API has its own document. For example, you can find the help page of <code>ecs_list_clusters</code> via <code>?ecs_list_clusters</code>. The full description of the APIs can be found at <a href="https://docs.aws.amazon.com/index.html">AWS Documentation</a>.</p>
<div id="a-note-for-the-aws-ec2-functions" class="section level2">
<h2>A note for the AWS EC2 functions</h2>
<div id="array" class="section level3">
<h3>Array</h3>
<p>While the AWS Documentation is very helpful in finding the API use cases. There are some inconsistencies between the AWS Documentation and the package functions. To be more specific, the array type parameter will get a special treatment in this package. For example, here is an example for <code>DescribeVpcs</code> from the <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeVpcs.html">AWS Documentation</a> which describes the specified VPCs</p>
<pre><code>https://ec2.amazonaws.com/?Action=DescribeVpcs
&amp;VpcId.1=vpc-081ec835f3EXAMPLE
&amp;vpcId.2=vpc-0ee975135dEXAMPLE
&amp;VpcId.3=vpc-06e4ab6c6cEXAMPLE</code></pre>
<p>The <code>VpcId</code> is so-called array object in the AWS Documentation. The package uses a vector or a list to represent the array object. The dot <code>.</code> in the array can be explained as <code>[[</code> and anything followed by the dot can be explained as the index. Therefore, the corresponding R expression for <code>VpcId</code> is</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co">## VpcId can also be a character vector</span></a>
<a class="sourceLine" id="cb5-2" title="2">VpcId &lt;-<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb5-3" title="3">VpcId[[<span class="dv">1</span>]] &lt;-<span class="st"> &quot;vpc-081ec835f3EXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb5-4" title="4">VpcId[[<span class="dv">2</span>]] &lt;-<span class="st"> &quot;vpc-0ee975135dEXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb5-5" title="5">VpcId[[<span class="dv">3</span>]] &lt;-<span class="st"> &quot;vpc-06e4ab6c6cEXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7">VpcId</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; [1] &quot;vpc-081ec835f3EXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; [1] &quot;vpc-0ee975135dEXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; [1] &quot;vpc-06e4ab6c6cEXAMPLE&quot;</span></a></code></pre></div>
<p>and the same request in R can be made by</p>
<pre><code>ec2_describe_vpcs(VpcId = VpcId)</code></pre>
<p>Internally, <code>VpcId</code> will be converted to an array object using the function <code>list_to_array</code>, e.g.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co">## The first argument is the parameter prefix</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">## The second argument should be a (named) vector or list</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">list_to_array</span>(<span class="st">&quot;VpcId&quot;</span>, VpcId)</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt; $VpcId.1</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt; [1] &quot;vpc-081ec835f3EXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt; $VpcId.2</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt; [1] &quot;vpc-0ee975135dEXAMPLE&quot;</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt; $VpcId.3</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt; [1] &quot;vpc-06e4ab6c6cEXAMPLE&quot;</span></a></code></pre></div>
<p>Just like list can be nested, the array object can be nested as well. For example, if we have a <code>tags</code> array like</p>
<pre><code>tags.1.name = name-example
tags.1.value.1 = value-example1
tags.1.value.2 = value-example2</code></pre>
<p>Using the array rule we mentioned above, the corresponding R expression is</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">tags &lt;-<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb9-2" title="2">tags[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb9-3" title="3">tags[[<span class="dv">1</span>]][[<span class="st">&quot;name&quot;</span>]] &lt;-<span class="st"> &quot;name-example&quot;</span></a>
<a class="sourceLine" id="cb9-4" title="4">tags[[<span class="dv">1</span>]][[<span class="st">&quot;value&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">list</span>()</a>
<a class="sourceLine" id="cb9-5" title="5">tags[[<span class="dv">1</span>]][[<span class="st">&quot;value&quot;</span>]][[<span class="dv">1</span>]] &lt;-<span class="st"> &quot;value-example1&quot;</span></a>
<a class="sourceLine" id="cb9-6" title="6">tags[[<span class="dv">1</span>]][[<span class="st">&quot;value&quot;</span>]][[<span class="dv">2</span>]] &lt;-<span class="st"> &quot;value-example2&quot;</span></a>
<a class="sourceLine" id="cb9-7" title="7"></a>
<a class="sourceLine" id="cb9-8" title="8">tags</a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt; [[1]]$name</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#&gt; [1] &quot;name-example&quot;</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#&gt; [[1]]$value</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co">#&gt; [[1]]$value[[1]]</span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="co">#&gt; [1] &quot;value-example1&quot;</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-17" title="17"><span class="co">#&gt; [[1]]$value[[2]]</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="co">#&gt; [1] &quot;value-example2&quot;</span></a></code></pre></div>
<p>We can verify the request parameter using <code>list_to_array</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">list_to_array</span>(<span class="st">&quot;tags&quot;</span>, tags)</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">#&gt; $tags.1.name</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt; [1] &quot;name-example&quot;</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; $tags.1.value.1</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt; [1] &quot;value-example1&quot;</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; $tags.1.value.2</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; [1] &quot;value-example2&quot;</span></a></code></pre></div>
</div>
<div id="filter" class="section level3">
<h3>Filter</h3>
<p>A even more aggressive change can be found on the <code>Filter</code> parameter. Here is an example of describing VPCs which satisfy some specific conditions from the <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeVpcs.html">AWS Documentation</a></p>
<pre><code>https://ec2.amazonaws.com/?Action=DescribeVpcs
&amp;Filter.1.Name=dhcp-options-id
&amp;Filter.1.Value.1=dopt-7a8b9c2d
&amp;Filter.1.Value.2=dopt-2b2a3d3c
&amp;Filter.2.Name=state
&amp;Filter.2.Value.1=available</code></pre>
<p>The <code>Filter</code> parameter is, of course, an array object in AWS documentation. However, it is clearly redundant to specify the filter’s name and value separately. Therefore, the package allows users to provide the filter as a named list. The same request in R can be given by</p>
<pre><code>ec2_describe_vpcs(
  Filter = list(
    `dhcp-options-id` = c(&quot;dopt-7a8b9c2d&quot;, &quot;dopt-2b2a3d3c&quot;),
    state=&quot;available&quot;
  )
)</code></pre>
<p>The <code>Filter</code> parameter will be converted into a list object which meets the AWS filter requirement. If you are unsure about whether you has specified the correct filter, you can check the converted filter values via</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">filter &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb13-2" title="2">    <span class="st">`</span><span class="dt">dhcp-options-id</span><span class="st">`</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dopt-7a8b9c2d&quot;</span>, <span class="st">&quot;dopt-2b2a3d3c&quot;</span>),</a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="dt">state=</span><span class="st">&quot;available&quot;</span></a>
<a class="sourceLine" id="cb13-4" title="4">  )</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="kw">list_to_filter</span>(filter)</a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt; $Filter.1.Name</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt; [1] &quot;dhcp-options-id&quot;</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt; $Filter.1.Value.1</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt; [1] &quot;dopt-7a8b9c2d&quot;</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt; $Filter.1.Value.2</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt; [1] &quot;dopt-2b2a3d3c&quot;</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">#&gt; $Filter.2.Name</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">#&gt; [1] &quot;state&quot;</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="co">#&gt; $Filter.2.Value.1</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">#&gt; [1] &quot;available&quot;</span></a></code></pre></div>
</div>
</div>
<div id="a-note-for-the-aws-ecs-functions" class="section level2">
<h2>A note for the AWS ECS functions</h2>
<p>The AWS ECS API uses JSON format to assemble the request parameter. Therefore, the ECS functions will call <code>rjson::toJSON</code> to convert the request parameters into JSON objects. If you are not sure if you use the parameter correctly, you can manually run <code>rjson::toJSON</code> and compare the result with the example provided in AWS documentation. For example, the request syntax for the <code>tags</code> parameter in <code>CreateCluster</code> API is</p>
<pre><code>&quot;tags&quot;: [ 
         { 
            &quot;key&quot;: &quot;string&quot;,
            &quot;value&quot;: &quot;string&quot;
         }
      ]</code></pre>
<p>The corresponding R format should be</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">tags &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="kw">c</span>(<span class="dt">key =</span> <span class="st">&quot;key&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;value&quot;</span>)</a>
<a class="sourceLine" id="cb15-3" title="3">  )</a></code></pre></div>
<p>You can verify it by</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">cat</span>(rjson<span class="op">::</span><span class="kw">toJSON</span>(tags, <span class="dt">indent =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co">#&gt; [</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">#&gt;  {</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt; &quot;key&quot;:&quot;key&quot;,</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt; &quot;value&quot;:&quot;value&quot;</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt;  }</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">#&gt; ]</span></a></code></pre></div>
</div>
</div>
<div id="package-settings" class="section level1">
<h1>Package settings</h1>
<p>The package handles the network issue via the parameter <code>retry_time</code>, <code>print_on_error</code> and <code>network_timeout</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">aws_get_retry_time</span>()</a>
<a class="sourceLine" id="cb17-2" title="2"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">aws_get_print_on_error</span>()</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="kw">aws_get_network_timeout</span>()</a>
<a class="sourceLine" id="cb17-6" title="6"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
<p><code>retry_time</code> determines the number of time the function will retry when network error occurs before throwing an error. If <code>print_on_error</code> is set to <code>False</code>, no message will be given when the network error has occurred and the package will silently resend the REST request. <code>network_timeout</code> decides how long the function will wait before it fails. They can be changed via the corresponding setters(e.g. <code>aws_set_retry_time</code>). You can also temporary alter the setting by providing the package setting as a parameter in the EC2 or ECS function.</p>
</div>
<div id="warning" class="section level1">
<h1>Warning</h1>
<p>Not all AWS APIs are idempotent, especially for the functions that need to allocate resources on AWS(e.g. <code>ecs_start_task</code>). If you plan to use the AWS function in your package, special handle for the network issue is required for the non-idempotent API to avoid a double allocation.</p>
</div>
<div id="session-info" class="section level1">
<h1>Session info</h1>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">sessionInfo</span>()</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="co">#&gt; R version 4.0.4 (2021-02-15)</span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">#&gt; Platform: x86_64-w64-mingw32/x64 (64-bit)</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co">#&gt; Running under: Windows 10 x64 (build 19042)</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt; Matrix products: default</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">#&gt; locale:</span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt; [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   </span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co">#&gt; [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          </span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="co">#&gt; [5] LC_TIME=English_United States.1252    </span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">#&gt; attached base packages:</span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="co">#&gt; other attached packages:</span></a>
<a class="sourceLine" id="cb18-17" title="17"><span class="co">#&gt; [1] aws.ecx_1.0.4</span></a>
<a class="sourceLine" id="cb18-18" title="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-19" title="19"><span class="co">#&gt; loaded via a namespace (and not attached):</span></a>
<a class="sourceLine" id="cb18-20" title="20"><span class="co">#&gt;  [1] tidyselect_1.1.0    xfun_0.19           remotes_2.2.0       purrr_0.3.4        </span></a>
<a class="sourceLine" id="cb18-21" title="21"><span class="co">#&gt;  [5] generics_0.1.0      vctrs_0.3.4         colorspace_2.0-0    testthat_3.0.2     </span></a>
<a class="sourceLine" id="cb18-22" title="22"><span class="co">#&gt;  [9] usethis_1.6.3       htmltools_0.5.0     stats4_4.0.4        yaml_2.2.1         </span></a>
<a class="sourceLine" id="cb18-23" title="23"><span class="co">#&gt; [13] base64enc_0.1-3     rlang_0.4.10        pkgbuild_1.1.0      pillar_1.4.6       </span></a>
<a class="sourceLine" id="cb18-24" title="24"><span class="co">#&gt; [17] rapiclient_0.1.3    glue_1.4.2          withr_2.3.0         BiocGenerics_0.36.0</span></a>
<a class="sourceLine" id="cb18-25" title="25"><span class="co">#&gt; [21] RColorBrewer_1.1-2  sessioninfo_1.1.1   rvcheck_0.1.8       lifecycle_0.2.0    </span></a>
<a class="sourceLine" id="cb18-26" title="26"><span class="co">#&gt; [25] stringr_1.4.0       dlstats_0.1.3       munsell_0.5.0       commonmark_1.7     </span></a>
<a class="sourceLine" id="cb18-27" title="27"><span class="co">#&gt; [29] gtable_0.3.0        devtools_2.3.2      memoise_1.1.0       evaluate_0.14      </span></a>
<a class="sourceLine" id="cb18-28" title="28"><span class="co">#&gt; [33] knitr_1.31          callr_3.5.1         ps_1.4.0            curl_4.3           </span></a>
<a class="sourceLine" id="cb18-29" title="29"><span class="co">#&gt; [37] parallel_4.0.4      Rcpp_1.0.5          BiocManager_1.30.10 scales_1.1.1       </span></a>
<a class="sourceLine" id="cb18-30" title="30"><span class="co">#&gt; [41] formatR_1.8         S4Vectors_0.28.0    desc_1.2.0          pkgload_1.1.0      </span></a>
<a class="sourceLine" id="cb18-31" title="31"><span class="co">#&gt; [45] jsonlite_1.7.2      fs_1.5.0            rjson_0.2.20        ggplot2_3.3.2      </span></a>
<a class="sourceLine" id="cb18-32" title="32"><span class="co">#&gt; [49] digest_0.6.27       stringi_1.5.3       dplyr_1.0.2         processx_3.4.4     </span></a>
<a class="sourceLine" id="cb18-33" title="33"><span class="co">#&gt; [53] rprojroot_2.0.2     grid_4.0.4          cli_2.3.1           tools_4.0.4        </span></a>
<a class="sourceLine" id="cb18-34" title="34"><span class="co">#&gt; [57] magrittr_1.5        tibble_3.0.4        pkgconfig_2.0.3     crayon_1.3.4       </span></a>
<a class="sourceLine" id="cb18-35" title="35"><span class="co">#&gt; [61] aws.signature_0.6.0 whisker_0.4         ellipsis_0.3.1      xml2_1.3.2         </span></a>
<a class="sourceLine" id="cb18-36" title="36"><span class="co">#&gt; [65] prettyunits_1.1.1   assertthat_0.2.1    rmarkdown_2.7       httr_1.4.2         </span></a>
<a class="sourceLine" id="cb18-37" title="37"><span class="co">#&gt; [69] roxygen2_7.1.1      rstudioapi_0.13     badger_0.0.9        R6_2.5.0           </span></a>
<a class="sourceLine" id="cb18-38" title="38"><span class="co">#&gt; [73] compiler_4.0.4</span></a></code></pre></div>
</div>
<div id="future-work" class="section level1">
<h1>future work</h1>
<ol style="list-style-type: decimal">
<li><p>Convert parameter type if it does not meet the AWS type requirement. Done</p></li>
<li><p>add link to the function documentation</p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
